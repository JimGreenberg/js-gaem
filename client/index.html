<canvas id='ctx' width=1000 height=600 style='border: 1px solid black;'></canvas>
<script src="https://cdn.socket.io/socket.io-1.7.3.js"></script>
<script>
  const context = document.getElementById('ctx').getContext('2d')
  context.font = '30px Arial';
  const socket = io();

  socket.on('newPos', data => {
    context.clearRect(0, 0, 1000, 600);
      for (var i = 0; i < data.length; i++) {
      context.fillText(data[i].icon.toString(), data[i].x, data[i].y)
    }
  })

  document.onkeydown = e => {

      if (e.keyCode === 68){//d
        socket.emit('keyPress', {inputId: 'rt', state: true})
      }
      else if (e.keyCode === 83){//s
        socket.emit('keyPress', {inputId: 'dn', state: true})
      }
      else if (e.keyCode === 65){//a
        socket.emit('keyPress', {inputId: 'lf', state: true})
      }
      else if (e.keyCode === 87){//w
        socket.emit('keyPress', {inputId: 'up', state: true})
      }

    }


  document.onkeyup = e => {

      if (e.keyCode === 68){//d
        socket.emit('keyPress', {inputId: 'rt', state: false})
      }
      else if (e.keyCode === 83){//s
        socket.emit('keyPress', {inputId: 'dn', state: false})
      }
      else if (e.keyCode === 65){//a
        socket.emit('keyPress', {inputId: 'lf', state: false})
      }
      else if (e.keyCode === 87){//w
        socket.emit('keyPress', {inputId: 'up', state: false})
      }

    }



</script>
